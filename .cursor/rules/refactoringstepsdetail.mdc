# Правило: Максимальная Детализация Шагов Рефакторинга

При рефакторинге, особенно с использованием инструмента `edit_file`, разбивайте задачу на максимально мелкие, атомарные шаги.

Каждый вызов `edit_file` должен выполнять **только одно логическое действие**:
- Добавить ОДИН `#include`.
- Объявить ОДИН экземпляр класса/переменную.
- Закомментировать ОДИН небольшой блок старого кода.
- Удалить ОДИН ранее закомментированный блок.
- Заменить ОДНО конкретное использование глобальной переменной/функции.
- Удалить ОДНО определение глобальной переменной/функции.

**Пример:**
*Неправильно:* "Перенести инициализацию BLE в BLEManager и удалить старый код."
*Правильно:*
1. "Закомментировать блок инициализации NimBLEDevice::init в setup()."
2. (Проверка компиляции)
3. "Удалить закомментированный блок NimBLEDevice::init."
4. (Проверка компиляции)
5. "Добавить вызов bleManager.init() в setup()."
6. (Проверка компиляции)
... и так далее для каждой части инициализации. 